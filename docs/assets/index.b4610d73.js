var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,s=(e,t)=>{for(var o in t||(t={}))n.call(t,o)&&l(e,o,t[o]);if(r)for(var o of r(t))a.call(t,o)&&l(e,o,t[o]);return e};import{c as i,u as c,r as m,V as u,a as d,R as p,b as h,S as y,P as g,d as E,e as f,y as v,B as b,x as k,f as w,n as M,T as P,s as S,p as C,g as L,C as x,O,h as R,i as A}from"./vendor.d3928a2c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const j=i((e=>({position:[0,0,0],velocity:[0,0,0],setVelocity:t=>e({velocity:t}),increaseVelocityUp:()=>e((e=>({velocity:[e.velocity[0],e.velocity[1]+1,e.velocity[2]]}))),stopVelocity:()=>e({velocity:[0,0,0]})}))),F=e=>e*(Math.PI/180),I=e=>e/(1+Math.abs(e)),N=e=>{const t=m.exports.useRef();return new u,d((e=>{const[o,r,n]=j.getState().velocity;t.current.rotation.set(0,35*F(Math.sin(.5*r+2*e.clock.getElapsedTime())),0)})),p.createElement("group",{ref:t,position:[-1,0,0]},p.createElement(h,{args:[.6,.6,.2],position:[-.2,0,0],radius:.05,smoothness:4},p.createElement("meshPhongMaterial",{attach:"material",color:(null==e?void 0:e.color)||"purple"})),p.createElement(h,{args:[.75,.4,.1],position:[-.6,.15,0],radius:.05,smoothness:4,rotation:[0,0,-10]},p.createElement("meshPhongMaterial",{attach:"material",color:(null==e?void 0:e.color)||"purple"})),p.createElement(h,{args:[.75,.4,.1],position:[-.6,-.15,0],radius:.05,smoothness:4,rotation:[0,0,10]},p.createElement("meshPhongMaterial",{attach:"material",color:(null==e?void 0:e.color)||"purple"})))},T=e=>{const r=m.exports.useRef(),n=new u;return d((t=>{const[o,a,l]=j.getState().velocity,s=n.lerp(n.set(I(-.1*a),.1*I(-1*a)+.5,0),.25);r.current.setRotationFromAxisAngle(s.normalize(),e.mirror?-10:.5)})),p.createElement("group",(a=s({},e),t(a,o({ref:r}))),p.createElement(y,{position:[0,0,0],args:[.3]},p.createElement("meshPhongMaterial",{attach:"material",color:"#f3f3f3"})),p.createElement(y,{position:[0,0,.25],args:[.1]},p.createElement("meshPhongMaterial",{translate:[0,10,.25],attach:"material",color:"black"})));var a},D=e=>{const[t,o]=c((()=>s({mass:1,position:[0,5,0]},e))),r=m.exports.useRef(),n=m.exports.useRef(),a=new u;return console.log("Player"),m.exports.useEffect((()=>{const e=o.velocity.subscribe((e=>{j.setState({velocity:e})})),t=o.position.subscribe((e=>{j.setState({position:e})}));return()=>{e(),t()}}),[]),d((()=>{const[t,l,s]=j.getState().velocity;e.up&&o.velocity.set(0,l+1,0),e.down&&o.velocity.set(0,l-1,0),e.right&&o.velocity.set(t+1,l,0),e.left&&o.velocity.set(t-1,l,0),o.rotation.set(0,0,F(45*I(l/10))),r.current.setRotationFromAxisAngle(a.lerp(a.set(I(.5*l),-.8,0),.25),.5),n.current.setRotationFromAxisAngle(a.lerp(a.set(-1*I(.5*l),.8,0),.25),.5)})),p.createElement("group",{ref:t},p.createElement(h,{args:[2,1,1],radius:.15,smoothness:4},p.createElement("meshPhongMaterial",{attach:"material",color:(null==e?void 0:e.color)||"purple"})),p.createElement(h,{args:[.5,.5,.9],position:[.9,-.25,0],rotation:[0,0,0],radius:.1,smoothness:4},p.createElement("meshPhongMaterial",{attach:"material",color:(null==e?void 0:e.color)||"purple"})),p.createElement(h,{args:[.5,.5,.1],position:[.25,.5,0],radius:.05,smoothness:4,rotation:[0,0,10]},p.createElement("meshPhongMaterial",{attach:"material",color:(null==e?void 0:e.color)||"purple"})),p.createElement(h,{ref:r,args:[.5,.1,.6],position:[-0,-.25,.5],radius:.05,smoothness:4},p.createElement("meshPhongMaterial",{attach:"material",color:(null==e?void 0:e.color)||"purple"})),p.createElement(h,{ref:n,args:[.5,.1,.6],position:[-0,-.25,-.5],radius:.05,smoothness:4},p.createElement("meshPhongMaterial",{attach:"material",color:(null==e?void 0:e.color)||"purple"})),p.createElement(h,{args:[.1,.1,.5],position:[1.15,-.4,0],radius:.05,smoothness:4},p.createElement("meshPhongMaterial",{attach:"material",color:"black"})),p.createElement(T,{position:[.6,.1,.5]}),p.createElement(T,{position:[.6,.1,-.5],mirror:!0}),p.createElement(N,{color:e.color}))},V=e=>{const[t]=E((()=>s({rotation:[-Math.PI/2,0,0],position:[0,-20,0]},e)));return p.createElement("mesh",{ref:t,receiveShadow:!0},p.createElement("planeBufferGeometry",{attach:"geometry",args:[1009,1e3]}),p.createElement("shadowMaterial",{attach:"material",color:"#171717"}),p.createElement("meshStandardMaterial",{color:"#4bb3fd"}))},B=e=>{const[t,o]=m.exports.useState(!1),[r,n]=m.exports.useState(!1),[a,l]=m.exports.useState(!1),[s,i]=m.exports.useState(!1);return console.log("Scene"),m.exports.useEffect((()=>{const e=e=>{38===e.keyCode||87===e.keyCode?o(!0):37===e.keyCode||65===e.keyCode?l(!0):39===e.keyCode||68===e.keyCode?i(!0):40===e.keyCode||83===e.keyCode?n(!0):e.keyCode},t=e=>{38===e.keyCode||87===e.keyCode?(console.log("up keyup"),o(!1)):37===e.keyCode||65===e.keyCode?l(!1):39===e.keyCode||68===e.keyCode?i(!1):40===e.keyCode||83===e.keyCode?n(!1):e.keyCode};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}}),[]),p.createElement(p.Fragment,null,p.createElement("pointLight",{position:[10,10,-10],decay:10,intensity:2}),p.createElement(g,null,p.createElement(D,{color:"red",up:t,down:r,left:a,right:s}),p.createElement(V,null)))},z=()=>{const e=m.exports.useRef();return d((e=>{})),p.createElement(f,null,p.createElement(v,{blendFunction:b.MULTIPLY,samples:30,rings:4,radius:5,intensity:30,luminanceInfluence:.7,distanceThreshold:.9,bias:.5,color:"#000"}),p.createElement(k,{blendFunction:b.NORMAL,adaptive:!1,resolution:256,middleGrey:3,maxLuminance:15,averageLuminance:.1,adaptationRate:.5}),p.createElement(w,{intensity:.2,luminanceThreshold:.2,luminanceSmoothing:1,height:800}),p.createElement(w,{intensity:.1,luminanceThreshold:.2,luminanceSmoothing:1,height:500}),p.createElement(M,{blendFunction:b.NORMAL,offset:[.001,.001]}),p.createElement(P,{eskil:!1,offset:.01,darkness:.5}),p.createElement(S,{ref:e,focusDistance:.17,focalLength:.3,bokehScale:4,height:480}),p.createElement(C,{opacity:.15,premultiply:!0,blendFunction:b.NORMAL}))},G=L.div`
  width: 100vw;
  height: 100vh;
`,U=()=>{const e=new u;return console.log("Camera movement"),d((t=>{const[o,r,n]=j.getState().position,a=e.lerp(e.set(o,r,n),.05);t.camera.lookAt(a),t.camera.updateProjectionMatrix()})),null},q=()=>(console.log("Scene mounted"),p.createElement(G,null,p.createElement(x,{shadows:!0,colorManagement:!0,camera:{position:[4.5,-10,50],fov:35,far:300,near:.1}},p.createElement(O,{enabled:!0,target:[0,-20,0],minDistance:20,maxDistance:60}),p.createElement("ambientLight",null),p.createElement("pointLight",{position:[10,10,10]}),p.createElement(B,null),p.createElement(R,{azimuth:.1,turbidity:5,rayleigh:0,inclination:.6,sunPosition:[.1,0,-5],distance:1e4}),p.createElement("fog",{attach:"fog",args:["#547f91",30,200]}),p.createElement(U,null),p.createElement(z,null))));A.render(p.createElement(p.StrictMode,null,p.createElement(q,null)),document.getElementById("root"));
